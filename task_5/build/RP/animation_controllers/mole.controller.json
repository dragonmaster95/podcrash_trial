{
    "format_version": "1.10.0",
    "animation_controllers": {
      "controller.animation.mole.main": {
        "initial_state": "default",
        "states": {
          "default": {
            "animations": ["idle"],
            "transitions": [
              { "unbury": "q.property('podcrash:state') == 'unbury'" },
              { "bury": "q.property('podcrash:state') == 'bury'" },
              { "move": "q.property('podcrash:state') == 'unburrowed' && query.modified_move_speed > 0.01" },
              { "move_underground": "q.property('podcrash:state') == 'burrowed' && query.modified_move_speed > 0.01" }
            ],
            "blend_transition": 0.2
          },

          "move": {
            "animations": [{ "walk": "math.min(1.4, math.lerp(0.2, 2.4, query.modified_move_speed))" }],
            "transitions": [
              { "default": "!q.property('podcrash:state') == 'burrowed' || query.modified_move_speed < 0.01" }
            ],
            "blend_transition": 0.2
          },
  
          "move_underground": {
            "particle_effects": [
              { "effect": "mole_buried" }
            ],
            "animations": ["walk"],
            "transitions": [
              { "default": "!q.property('podcrash:state') == 'unburrowed' || query.modified_move_speed < 0.01" }
            ],
            "blend_transition": 0.2
          },

          "unbury": {
            "animations": ["unbury"],
            "transitions": [
                { "default": "q.property('podcrash:state') == 'unburrowed'" }
            ],
            "blend_transition": 0.2
          },

          "bury": {
            "animations": ["bury"],
            "transitions": [
                { "default": "q.property('podcrash:state') == 'burrowed'" }
            ],
            "blend_transition": 0.2
          }
        }
      }
    }
  }